<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Principal de Ventas</title>
    <!-- Incluye Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define una fuente bonita para el título */
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,700&family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif; /* Aplica la fuente Inter al cuerpo para el texto general */
            background-color: #f8f8f8; /* Un fondo muy claro para un look limpio */
            display: flex;
            flex-direction: column; /* Organiza los elementos en columna */
            align-items: center; /* Centra el contenido horizontalmente */
            min-height: 100vh; /* Asegura que ocupe al menos toda la altura de la ventana */
        }
        /* Estilo específico para el título 'PROJECT MOM' con la nueva tipografía itálica */
        .title-font {
            font-family: 'Playfair Display', serif;
            font-style: italic;
        }
        /* Estilos para el carrusel principal */
        #productCarousel {
            position: relative;
            padding-top: 75%; /* Mantiene una relación de aspecto 4:3 para las imágenes (300/400 = 0.75) */
            height: 0;
            width: 100%;
            cursor: grab; /* Indica que se puede arrastrar */
        }
        .carousel-item {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
        }
        .carousel-item.active {
            opacity: 1;
            visibility: visible;
        }
        /* Estilos para la animación de fade de los detalles del producto */
        .product-details-fade {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
        }
        .product-details-fade.active {
            opacity: 1;
            visibility: visible;
        }

        /* Animación para toda la página al cargar */
        body.fadeIn {
            opacity: 0;
            animation: fadeIn 0.8s ease-in-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        /* Animación para toda la página al salir (para enlaces) */
        body.fadeOut {
            animation: fadeOut 0.5s ease-in-out forwards;
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        /* --- Estilos de la Modal de Producto --- */
        .product-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            visibility: hidden; /* Oculto por defecto */
            opacity: 0;
            transition: visibility 0.3s, opacity 0.3s ease-in-out;
        }

        .product-modal-overlay.open {
            visibility: visible;
            opacity: 1;
        }

        .product-modal-content {
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            max-width: 90%; /* Ajuste para móvil */
            max-height: 90%; /* Ajuste para móvil */
            overflow-y: auto; /* Para scroll si el contenido es muy largo */
            transform: scale(0.9); /* Inicia un poco encogido */
            transition: transform 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .product-modal-overlay.open .product-modal-content {
            transform: scale(1); /* Se expande a tamaño normal */
        }

        .modal-close-button {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #4a5568; /* gray-700 */
            transition: color 0.2s;
        }

        .modal-close-button:hover {
            color: #2d3748; /* gray-800 */
        }

        /* Responsive adjustments for modal content */
        @media (min-width: 640px) { /* sm breakpoint */
            .product-modal-content {
                flex-direction: row;
                max-width: 700px; /* Ancho máximo en desktop */
                padding: 2rem;
            }
        }

        /* Estilos para el menú desplegable */
        .menu-dropdown {
            display: none;
            position: absolute;
            background-color: #ffffff;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 0.5rem;
            overflow: hidden;
            right: 0; /* Align to the right of the parent */
            top: 100%; /* Position below the parent */
            margin-top: 0.5rem;
        }

        .menu-dropdown-open {
            display: block;
        }

        .menu-dropdown a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            text-align: left;
        }

        .menu-dropdown a:hover {
            background-color: #f1f1f1;
            color: #8B5CF6; /* Tailwind purple-500 */
        }

        .dropdown-container {
            position: relative;
            display: inline-block;
        }

        /* Oculta la modal de categorías si existe, ya que ahora será un dropdown */
        .categories-modal-overlay {
            display: none !important;
        }

        /* Oculta el item de categorías en pantallas pequeñas */
        @media (max-width: 639px) { /* sm breakpoint */
            #categoriesMenuItem {
                display: none;
            }
        }
    </style>
</head>
<body class="antialiased fadeIn">
    <nav class="w-full bg-white shadow-md p-4 flex justify-between items-center fixed top-0 z-50">
        <!-- Título "PROJECT MOM" (ya no es un enlace) -->
        <h1 class="text-2xl sm:text-3xl font-extrabold text-gray-900 leading-tight tracking-tight">
            <span class="bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-pink-600 title-font">
                PROJECT MOM
            </span>
        </h1>

        <!-- Botón de menú hamburguesa para móviles -->
        <div class="sm:hidden">
            <button id="menuButton" class="text-gray-600 hover:text-purple-600 focus:outline-none">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </div>

        <!-- Menú de navegación principal (oculto en móvil por defecto, visible en sm y superior) -->
        <div id="navMenu" class="hidden sm:flex items-center space-x-6">
            <div class="dropdown-container">
                <a href="#" id="categoriesMenuItem" class="text-gray-700 hover:text-purple-600 font-semibold no-underline flex items-center">
                    Categorías
                    <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </a>
                <div id="categoriesDropdown" class="menu-dropdown">
                    <a href="level2.html" class="menu-item-link">Niños</a>
                    <a href="caballeros.html" class="menu-item-link">Caballeros</a>
                    <a href="damas.html" class="menu-item-link">Damas</a>
                    <a href="accesorios.html" class="menu-item-link">Accesorios</a>
                </div>
            </div>
            <a href="#" id="contactMenuItem" class="text-gray-700 hover:text-purple-600 font-semibold no-underline">Contacto</a>
        </div>

        <!-- Menú desplegable para móviles (inicialmente oculto) -->
        <div id="menuDropdown" class="menu-dropdown absolute top-full right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
            <a href="#" id="categoriesMenuItemMobile" class="block px-4 py-2 text-gray-800 hover:bg-gray-100 flex justify-between items-center">
                Categorías
                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </a>
            <div id="categoriesDropdownMobile" class="hidden pl-4">
                <a href="level2.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 menu-item-link">Niños</a>
                <a href="caballeros.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 menu-item-link">Caballeros</a>
                <a href="damas.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 menu-item-link">Damas</a>
                <a href="accesorios.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 menu-item-link">Accesorios</a>
            </div>
            <a href="#" id="contactMenuItemMobile" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Contacto</a>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8 max-w-7xl mt-16">
        <main class="text-gray-500">
            <section class="bg-white rounded-lg shadow-md p-3 sm:p-4 mb-6 relative overflow-hidden flex flex-col md:flex-row items-center md:items-start gap-3 md:gap-6">
                <div class="w-full md:w-1/2 flex flex-col items-center">
                    <div id="productCarousel" class="relative w-full max-w-xs sm:max-w-sm md:max-w-md overflow-hidden rounded-lg shadow-sm">
                        </div>

                    <div class="flex justify-center mt-4 space-x-4 md:flex">
                        <button id="prevBtn" class="p-2 rounded-full text-gray-600 hover:bg-gray-100 hover:text-purple-600 focus:outline-none transition duration-300 transform hover:scale-110">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        </button>
                        <button id="nextBtn" class="p-2 rounded-full text-gray-600 hover:bg-gray-100 hover:text-purple-600 focus:outline-none transition duration-300 transform hover:scale-110">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                    </div>
                </div>

                <div id="productDetails" class="w-full md:w-1/2 text-center md:text-left product-details-fade
                            sm:relative sm:z-10 sm:bg-white/90 sm:px-6 sm:py-8 sm:-mt-20 sm:mx-auto sm:max-w-md sm:rounded-lg
                            md:mt-0 md:mx-0 md:max-w-none md:px-0 md:py-0 md:bg-transparent">
                    <h1 id="productName" class="text-xl sm:text-2xl font-extrabold text-gray-900 mb-1.5"></h1>
                    <p id="productPrice" class="text-lg font-bold text-purple-600 mb-2"></p>

                    <p id="productDescription" class="text-gray-700 leading-relaxed mb-3 text-xs"></p>

                    <div class="mb-3">
                        <label class="block text-xs font-semibold text-gray-800 mb-1">Selecciona Estilo:</label>
                        <div id="productThumbnails" class="flex flex-wrap justify-center md:justify-start gap-2">
                            </div>
                    </div>

                    <a id="buyNowBtn" href="#" target="_blank" class="inline-block w-full md:w-auto bg-purple-600 hover:bg-purple-700 text-white font-bold py-1.5 px-4 rounded-full shadow-md transition duration-300 transform hover:scale-105 text-xs no-underline">
                        Comprar Ahora
                    </a>
                </div>
            </section>

            <section class="relative mt-12 mb-6 text-center mx-auto max-w-2xl px-4 py-8 rounded-lg shadow-md
                          bg-white">
                <p class="text-3xl sm:text-4xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-pink-600">
                    ¡Tu estilo, tu historia! Encuentra la pieza perfecta que te define.
                </p>
            </section>

            <section class="mt-16 text-center">
                <h2 class="text-3xl font-bold text-gray-800 mb-8">Más para Ti</h2>
                <div id="moreForYouContainer" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 sm:gap-6">
                    <div id="mark1ProductLink" class="bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer no-underline text-gray-800 hover:shadow-md transition">
                        <img src="https://placehold.co/200x250/f5f5f5/606060?text=Mark+1" alt="Mark 1" class="w-full h-auto rounded-md mb-2 object-cover">
                        <h3 class="text-sm font-semibold">Mark 1</h3>
                    </div>
                    <div id="mark2ProductLink" class="bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer no-underline text-gray-800 hover:shadow-md transition">
                        <img src="https://placehold.co/200x250/f0f0f0/707070?text=Producto+Extra+2" alt="Producto Extra +2" class="w-full h-auto rounded-md mb-2 object-cover">
                        <h3 class="text-sm font-semibold">Mark 2</h3>
                    </div>
                    <div id="mark3ProductLink" class="bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer no-underline text-gray-800 hover:shadow-md transition">
                        <img src="https://placehold.co/200x250/e5e5e5/808080?text=Producto+Extra+3" alt="Producto Extra +3" class="w-full h-auto rounded-md mb-2 object-cover">
                        <h3 class="text-sm font-semibold">Mark 3</h3>
                    </div>
                    <div id="mark4ProductLink" class="bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer no-underline text-gray-800 hover:shadow-md transition">
                        <img src="https://placehold.co/200x250/e0e0e0/909090?text=Producto+Extra+4" alt="Producto Extra +4" class="w-full h-auto rounded-md mb-2 object-cover">
                        <h3 class="text-sm font-semibold">Mark 4</h3>
                    </div>
                    <div id="mark5ProductLink" class="bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer no-underline text-gray-800 hover:shadow-md transition">
                        <img src="https://placehold.co/200x250/d5d5d5/a0a0a0?text=Producto+Extra+5" alt="Producto Extra +5" class="w-full h-auto rounded-md mb-2 object-cover">
                        <h3 class="text-sm font-semibold">Mark 5</h3>
                    </div>
                    <div id="mark6ProductLink" class="bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer no-underline text-gray-800 hover:shadow-md transition">
                        <img src="https://placehold.co/200x250/c0c0c0/303030?text=Mark+6" alt="Mark 6" class="w-full h-auto rounded-md mb-2 object-cover">
                        <h3 class="text-sm font-semibold">Mark 6</h3>
                    </div>
                    <!-- Nuevo producto Mark 7 -->
                    <div id="mark7ProductLink" class="bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer no-underline text-gray-800 hover:shadow-md transition">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQacFW2O_tGrpGS__29r83vCxTdhV8n79wT3A&s" alt="Mark 7" class="w-full h-auto rounded-md mb-2 object-cover">
                        <h3 class="text-sm font-semibold">Mark 7</h3>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-12 sm:mt-16 text-gray-500 text-xs sm:text-sm">
            <p>&copy; 2023 PROJECT MOM. Todos los derechos reservados.</p>
        </footer>
    </div>

    <!-- Modal de Producto -->
    <div id="productModalOverlay" class="product-modal-overlay">
        <div id="productModalContent" class="product-modal-content">
            <button id="closeModalBtn" class="modal-close-button">&times;</button>
            <div class="flex flex-col sm:flex-row items-center gap-4 sm:gap-6 w-full">
                <div class="sm:w-1/2 flex justify-center">
                    <img id="modalProductImage" src="" alt="Producto en Modal" class="w-full max-w-[250px] h-auto rounded-lg shadow-md object-cover">
                </div>
                <div class="sm:w-1/2 text-center sm:text-left">
                    <h2 id="modalProductName" class="text-2xl font-bold text-gray-900 mb-2"></h2>
                    <p id="modalProductPrice" class="text-xl font-bold text-purple-600 mb-3"></p>
                    <p id="modalProductDescription" class="text-gray-700 text-sm leading-relaxed mb-4"></p>
                    <a id="modalBuyNowBtn" href="#" target="_blank" class="inline-block w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-2.5 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105 no-underline text-base">
                        Comprar Ahora
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- La Nueva Modal de Contacto ha sido eliminada de aquí -->

    <script type="module">
        document.addEventListener('DOMContentLoaded', function() {
            // Lógica del Carrusel y Detalles del Producto (variables globales)
            const productCarouselDiv = document.getElementById('productCarousel');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const productNameElem = document.getElementById('productName');
            const productPriceElem = document.getElementById('productPrice');
            const productDescriptionElem = document.getElementById('productDescription');
            const productThumbnailsDiv = document.getElementById('productThumbnails'); // Contenedor de miniaturas
            const productDetailsElem = document.getElementById('productDetails'); // Contenedor de los detalles para la animación
            const buyNowBtn = document.getElementById('buyNowBtn'); // Botón de Comprar

            let currentProductIndex = 0; // Índice del producto actual

            // Datos de los productos (hardcodeados, ahora con 5 productos, cada uno con 3 estilos A, B, C)
            const products = [
                {
                    name: "Producto Principal 1",
                    price: 99.99,
                    description: "Este es el primer producto destacado. Ofrece una calidad excepcional y un diseño moderno que se adapta a cualquier estilo. ¡No te lo pierdas!",
                    images: [
                        "https://placehold.co/400x300/f0f0f0/606060?text=P1+Estilo+A",
                        "https://placehold.co/400x300/f5f5f5/707070?text=P1+Estilo+B",
                        "https://placehold.co/400x300/ebebeb/808080?text=P1+Estilo+C"
                    ]
                },
                {
                    name: "Producto Principal 2",
                    price: 120.50,
                    description: "Descubre nuestro segundo producto, ideal para quienes buscan innovación y rendimiento. Su tecnología avanzada te sorprenderá.",
                    images: [
                        "https://placehold.co/400x300/e0e0e0/505050?text=P2+Estilo+A",
                        "https://placehold.co/400x300/e5e5e5/606060?text=P2+Estilo+B",
                        "https://placehold.co/400x300/d0d0d0/404040?text=P2+Estilo+C"
                    ]
                },
                {
                    name: "Producto Principal 3",
                    price: 75.00,
                    description: "El tercer producto es la opción perfecta para el día a día. Cómodo, duradero y con un estilo atemporal que nunca pasa de moda.",
                    images: [
                        "https://placehold.co/400x300/d0d0d0/404040?text=P3+Estilo+A",
                        "https://placehold.co/400x300/d5d5d5/505050?text=P3+Estilo+B",
                        "https://placehold.co/400x300/c0c0c0/303030?text=P3+Estilo+C"
                    ]
                },
                {
                    name: "Producto Principal 4",
                    price: 150.00,
                    description: "Un producto exclusivo con características únicas. Calidad premium garantizada. ¡Ideal para un regalo especial!",
                    images: [
                        "https://placehold.co/400x300/c0c0c0/303030?text=P4+Estilo+A",
                        "https://placehold.co/400x300/c5c5c5/404040?text=P4+Estilo+B",
                        "https://placehold.co/400x300/b0b0b0/202020?text=P4+Estilo+C"
                    ]
                },
                {
                    name: "Producto Principal 5",
                    price: 85.75,
                    description: "Diseñado para la comodidad y el estilo. Perfecto para cualquier ocasión y fácil de combinar. ¡Añádelo a tu colección!",
                    images: [
                        "https://placehold.co/400x300/b0b0b0/202020?text=P5+Estilo+A",
                        "https://placehold.co/400x300/b5b5b5/303030?text=P5+Estilo+B",
                        "https://placehold.co/400x300/a0a0a0/101010?text=P5+Estilo+C"
                    ]
                }
            ];

            // Función para actualizar el enlace de WhatsApp
            function updateWhatsAppLink() {
                const product = products[currentProductIndex];
                const currentImageAlt = productCarouselDiv.querySelector('.carousel-item.active img')?.alt || '';
                let styleInfo = '';

                const styleMatch = currentImageAlt.match(/Estilo ([A-Z])/);
                if (styleMatch && styleMatch[0]) {
                    styleInfo = ` Estoy interesado(a) en el ${styleMatch[0]}.`;
                }

                let message = `¡Hola! Me gustaría comprar el "${product.name}".`;
                message += styleInfo;
                message += ` Precio: $${product.price.toFixed(2)}.`;


                const whatsappNumber = '573024640777';
                const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
                buyNowBtn.href = whatsappUrl;
            }

            // Función para mostrar la imagen activa en el carrusel principal
            function showCarouselImage(imageIndex) {
                const currentProductImages = productCarouselDiv.querySelectorAll('.carousel-item');
                currentProductImages.forEach((item, i) => {
                    item.classList.remove('active');
                    if (i === imageIndex) {
                        item.classList.add('active');
                    }
                });

                productThumbnailsDiv.querySelectorAll('.thumbnail-item').forEach((thumb, i) => {
                    thumb.classList.remove('active-thumbnail');
                    if (i === imageIndex) {
                        thumb.classList.add('active-thumbnail');
                    }
                });
                updateWhatsAppLink();
            }


            // Función para renderizar el carrusel y los detalles del producto
            function renderProduct(index) {
                const product = products[index];

                const currentActiveImage = productCarouselDiv.querySelector('.carousel-item.active');
                const oldProductDetailsActive = productDetailsElem.classList.contains('active');

                if (currentActiveImage) {
                    currentActiveImage.classList.remove('active');
                }
                if (oldProductDetailsActive) {
                    productDetailsElem.classList.remove('active');
                }

                setTimeout(() => {
                    productCarouselDiv.innerHTML = '';
                    product.images.forEach((imgSrc, i) => {
                        const imgDiv = document.createElement('div');
                        imgDiv.classList.add('carousel-item');
                        const img = document.createElement('img');
                        img.src = imgSrc;
                        img.alt = `${product.name} - Estilo ${String.fromCharCode(65 + i)}`;
                        img.classList.add('w-full', 'h-full', 'object-cover');
                        imgDiv.appendChild(img);
                        productCarouselDiv.appendChild(imgDiv);
                    });

                    productNameElem.textContent = product.name;
                    productPriceElem.textContent = `$${product.price.toFixed(2)}`;
                    productDescriptionElem.textContent = product.description;

                    productThumbnailsDiv.innerHTML = '';
                    product.images.forEach((imgSrc, i) => {
                        const thumbnailDiv = document.createElement('div');
                        thumbnailDiv.classList.add('w-16', 'h-12', 'rounded-md', 'overflow-hidden', 'thumbnail-item', 'relative');
                        const thumbnailImg = document.createElement('img');
                        thumbnailImg.src = imgSrc;
                        thumbnailImg.alt = `${product.name} - Miniatura Estilo ${String.fromCharCode(65 + i)}`;
                        thumbnailImg.classList.add('w-full', 'h-full', 'object-cover');
                        thumbnailDiv.appendChild(thumbnailImg);
                        productThumbnailsDiv.appendChild(thumbnailDiv);

                        thumbnailDiv.addEventListener('click', () => {
                            showCarouselImage(i);
                        });
                    });

                    if (product.images.length > 0) {
                        productCarouselDiv.querySelector('.carousel-item').classList.add('active');
                        productThumbnailsDiv.querySelector('.thumbnail-item').classList.add('active-thumbnail');
                    }
                    productDetailsElem.classList.add('active');

                    updateWhatsAppLink();
                }, 400);
            }

            // Función para avanzar al siguiente producto
            function nextProduct() {
                currentProductIndex = (currentProductIndex + 1) % products.length;
                renderProduct(currentProductIndex);
            }

            // Función para retroceder al producto anterior
            function prevProduct() {
                currentProductIndex = (currentProductIndex - 1 + products.length) % products.length;
                renderProduct(currentProductIndex);
            }

            // Controladores de eventos para las flechas
            prevBtn.addEventListener('click', prevProduct);
            nextBtn.addEventListener('click', nextProduct);

            // DECLARACIONES DE ELEMENTOS DOM RELACIONADOS CON LAS MODALES Y EL MENÚ
            const productModalOverlay = document.getElementById('productModalOverlay');
            const closeModalBtn = document.getElementById('closeModalBtn');
            // Eliminado: const contactModalOverlay = document.getElementById('contactModalOverlay');
            // Eliminado: const closeContactModalBtn = document.getElementById('closeContactModalBtn');

            const modalProductImage = document.getElementById('modalProductImage');
            const modalProductName = document.getElementById('modalProductName');
            const modalProductPrice = document.getElementById('modalProductPrice');
            const modalProductDescription = document.getElementById('modalProductDescription');
            const modalBuyNowBtn = document.getElementById('modalBuyNowBtn');

            // Elementos del menú
            const menuButton = document.getElementById('menuButton'); // Botón hamburguesa
            const menuDropdown = document.getElementById('menuDropdown'); // Menú desplegable móvil
            const categoriesMenuItem = document.getElementById('categoriesMenuItem'); // "Categorías" en desktop
            const categoriesDropdown = document.getElementById('categoriesDropdown'); // Dropdown de categorías en desktop
            const categoriesMenuItemMobile = document.getElementById('categoriesMenuItemMobile'); // "Categorías" en móvil
            const categoriesDropdownMobile = document.getElementById('categoriesDropdownMobile'); // Dropdown de categorías en móvil
            // Eliminado: const contactMenuItem = document.getElementById('contactMenuItem'); // "Contacto" en desktop
            // Eliminado: const contactMenuItemMobile = document.getElementById('contactMenuItemMobile'); // "Contacto" en móvil

            // Referencias a los enlaces de categoría
            const ninosCategoryLink = document.querySelector('a[href="level2.html"]'); // Enlace actualizado
            const caballerosCategoryLink = document.querySelector('a[href="caballeros.html"]');
            const damasCategoryLink = document.querySelector('a[href="damas.html"]');
            const accesoriosCategoryLink = document.querySelector('a[href="accesorios.html"]');


            // REFERENCIAS A LOS PRODUCTOS DE "MÁS PARA TI"
            const mark1ProductLink = document.getElementById('mark1ProductLink');
            const mark2ProductLink = document.getElementById('mark2ProductLink');
            const mark3ProductLink = document.getElementById('mark3ProductLink');
            const mark4ProductLink = document.getElementById('mark4ProductLink');
            const mark5ProductLink = document.getElementById('mark5ProductLink');
            const mark6ProductLink = document.getElementById('mark6ProductLink');
            const mark7ProductLink = document.getElementById('mark7ProductLink');


            // Datos de los productos extra (modales)
            const extraProductDetails = {
                "mark1": {
                    name: "Mark 1",
                    price: 35.00,
                    description: "Nuestro icónico Mark 1. Diseño elegante y adaptable, perfecto para cualquier ocasión. Hecho con materiales duraderos que garantizan calidad y confort.",
                    image: "https://placehold.co/400x500/f5f5f5/606060?text=Mark+1"
                },
                "mark2": {
                    name: "Mark 2",
                    price: 55.00,
                    description: "Una evolución de nuestro producto Mark 1. Diseño mejorado, mayor durabilidad y características innovadoras que te encantarán. ¡Ideal para uso diario!",
                    image: "https://placehold.co/400x500/f0f0f0/707070?text=Mark+2+Completo"
                },
                "mark3": {
                    name: "Mark 3",
                    price: 75.00,
                    description: "El Mark 3 combina funcionalidad y estilo a la perfección. Es tu compañero ideal para aventuras diarias, ofreciendo una experiencia superior.",
                    image: "https://placehold.co/400x500/e5e5e5/808080?text=Mark+3+Completo"
                },
                "mark4": {
                    name: "Mark 4",
                    price: 150.00,
                    description: "Experimenta la exclusividad con el Mark 4. Una pieza de ingeniería y arte, diseñada para los más exigentes. Detalles premium y rendimiento sin igual.",
                    image: "https://placehold.co/400x500/e0e0e0/909090?text=Mark+4+Completo"
                },
                "mark5": {
                    name: "Mark 5",
                    price: 85.75,
                    description: "El Mark 5, tu aliado de estilo. Confort inigualable y un diseño que se adapta a tu ritmo de vida. Versátil y siempre a la moda.",
                    image: "https://placehold.co/400x500/d5d5d5/a0a0a0?text=Mark+5+Completo"
                },
                "mark6": {
                    name: "Mark 6",
                    price: 110.00,
                    description: "El nuevo Mark 6 llega con innovaciones que redefinirán tu experiencia. Potencia y elegancia en un solo producto, diseñado para el futuro.",
                    image: "https://placehold.co/400x500/c0c0c0/303030?text=Mark+6+Completo"
                },
                "mark7": {
                    name: "Mark 7",
                    price: 95.00,
                    description: "Un nuevo diseño innovador que combina lo clásico con lo moderno, ofreciendo una experiencia única y un estilo inigualable.",
                    image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQacFW2O_tGrpGS__29r83vCxTdhV8n79wT3A&s"
                }
            };

            // FUNCIONES DE MODAL
            function openProductModal(productDetails) {
                modalProductImage.src = productDetails.image;
                modalProductImage.alt = productDetails.name;
                modalProductName.textContent = productDetails.name;
                modalProductPrice.textContent = `$${productDetails.price.toFixed(2)}`;
                modalProductDescription.textContent = productDetails.description;

                const whatsappNumber = '573024640777';
                const message = `¡Hola! Me gustaría comprar el "${productDetails.name}" por $${productDetails.price.toFixed(2)}.`;
                modalBuyNowBtn.href = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;

                productModalOverlay.classList.add('open');
                // Eliminado: if (contactModalOverlay) contactModalOverlay.classList.remove('open');
                if (menuDropdown) menuDropdown.classList.remove('menu-dropdown-open'); // Cerrar menú móvil si está abierto
            }

            function closeProductModal() {
                productModalOverlay.classList.remove('open');
            }

            // Eliminado: function openContactModal()
            // Eliminado: function closeContactModal()

            // Lógica para el botón de menú hamburguesa
            if (menuButton) {
                menuButton.addEventListener('click', function() {
                    menuDropdown.classList.toggle('menu-dropdown-open');
                    // Cerrar otras modales si están abiertas
                    // Eliminado: if (contactModalOverlay) contactModalOverlay.classList.remove('open');
                    if (productModalOverlay) productModalOverlay.classList.remove('open');
                });
            }

            // Lógica para abrir/cerrar el dropdown de categorías en desktop
            if (categoriesMenuItem) {
                categoriesMenuItem.addEventListener('click', function(event) {
                    event.preventDefault();
                    categoriesDropdown.classList.toggle('menu-dropdown-open');
                    // Asegúrate de que el menú móvil esté cerrado si se abre el desktop
                    if (menuDropdown) menuDropdown.classList.remove('menu-dropdown-open');
                    // Eliminado: if (contactModalOverlay) contactModalOverlay.classList.remove('open');
                    if (productModalOverlay) productModalOverlay.classList.remove('open');
                });
            }

            // Lógica para abrir/cerrar el dropdown de categorías en móvil
            if (categoriesMenuItemMobile) {
                categoriesMenuItemMobile.addEventListener('click', function(event) {
                    event.preventDefault();
                    categoriesDropdownMobile.classList.toggle('hidden');
                });
            }

            // Lógica para los enlaces de categoría dentro de los dropdowns
            const categoryLinks = document.querySelectorAll('.menu-item-link');
            categoryLinks.forEach(link => {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    document.body.classList.add('fadeOut');
                    const targetUrl = this.href;
                    setTimeout(() => {
                        window.location.href = targetUrl;
                    }, 500);
                });
            });

            // Lógica para abrir/cerrar la modal de contacto (desktop y móvil) - Modificada o Eliminada
            // La funcionalidad de la modal de contacto ha sido eliminada por completo.
            // Eliminado: if (contactMenuItem) { contactMenuItem.parentNode.removeChild(contactMenuItem); }
            // Eliminado: if (contactMenuItemMobile) { contactMenuItemMobile.parentNode.removeChild(contactMenuItemMobile); }

            // Eliminado: if (closeContactModalBtn)
            // Eliminado: if (contactModalOverlay)

            // Asignar listeners a cada producto de "Más para Ti"
            if (mark1ProductLink) {
                mark1ProductLink.addEventListener('click', () => openProductModal(extraProductDetails.mark1));
            }
            if (mark2ProductLink) {
                mark2ProductLink.addEventListener('click', () => openProductModal(extraProductDetails.mark2));
            }
            if (mark3ProductLink) {
                mark3ProductLink.addEventListener('click', () => openProductModal(extraProductDetails.mark3));
            }
            if (mark4ProductLink) {
                mark4ProductLink.addEventListener('click', () => openProductModal(extraProductDetails.mark4));
            }
            if (mark5ProductLink) {
                mark5ProductLink.addEventListener('click', () => openProductModal(extraProductDetails.mark5));
            }
            if (mark6ProductLink) {
                mark6ProductLink.addEventListener('click', () => openProductModal(extraProductDetails.mark6));
            }
            if (mark7ProductLink) {
                mark7ProductLink.addEventListener('click', () => openProductModal(extraProductDetails.mark7));
            }

            // Listener para cerrar la modal de producto al hacer clic en la "X" o fuera de ella
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', closeProductModal);
            }
            if (productModalOverlay) {
                productModalOverlay.addEventListener('click', function(event) {
                    if (event.target === productModalOverlay) {
                        closeProductModal();
                    }
                });
            }

            // Cerrar dropdowns o modales si se hace clic fuera
            document.addEventListener('click', function(event) {
                // Cerrar menú hamburguesa móvil si está abierto y se hace clic fuera
                if (menuDropdown && !menuDropdown.contains(event.target) && menuButton && !menuButton.contains(event.target)) {
                    menuDropdown.classList.remove('menu-dropdown-open');
                }
                // Cerrar dropdown de categorías desktop si está abierto y se hace clic fuera
                if (categoriesDropdown && !categoriesDropdown.contains(event.target) && categoriesMenuItem && !categoriesMenuItem.contains(event.target)) {
                    categoriesDropdown.classList.remove('menu-dropdown-open');
                }
                // Cerrar dropdown de categorías móvil si está abierto y se hace clic fuera
                if (categoriesDropdownMobile && !categoriesDropdownMobile.contains(event.target) && categoriesMenuItemMobile && !categoriesMenuItemMobile.contains(event.target)) {
                    categoriesDropdownMobile.classList.add('hidden');
                }
                 // Eliminado: if (contactModalOverlay && ...)
            });


            // Lógica para la animación de salida al hacer clic en enlaces de navegación
            const allNavLinks = document.querySelectorAll('nav a');
            allNavLinks.forEach(link => {
                link.addEventListener('click', function(event) {
                    // Evitar que los enlaces de menú (categorías/contacto) disparen el fadeOut inmediato
                    if (this.href && this.href !== window.location.href + '#' && this.href !== '#' &&
                        this.id !== 'categoriesMenuItem' &&
                        this.id !== 'categoriesMenuItemMobile' &&
                        !this.classList.contains('menu-item-link')) { // 'contactMenuItem' y 'contactMenuItemMobile' ya no son necesarios aquí
                        event.preventDefault();
                        document.body.classList.add('fadeOut');
                        const targetUrl = this.href;
                        setTimeout(() => {
                            window.location.href = targetUrl;
                        }, 500);
                    }
                });
            });

            // Renderizar el primer producto al cargar la página
            renderProduct(currentProductIndex);
        });
    </script>
</body>
</html>
